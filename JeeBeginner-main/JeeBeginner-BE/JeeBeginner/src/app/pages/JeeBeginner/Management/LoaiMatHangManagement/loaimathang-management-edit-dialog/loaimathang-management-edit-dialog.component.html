
<div class="modal-content">
    <div class="modal-header">
      <div class="modal-title h4" id="example-modal-sizes-title-lg">
        <span class="dialog-title"> {{ getTitle()}} </span>
      </div>
      <div class="modal-title" style="display: inline; flex: 2">
        <!-- <button
          [class.spinner]="isLoadingSubmit$ | async"
          [disabled]="isLoadingSubmit$ | async"
          mat-raised-button
          style="float: right; margin-right: 12px"
          class="ja_btn-addnew"
          (click)="Luu()"
        >
          <mat-icon style="color: #ffffff; font-size: 16px" aria-hidden="false">
            save</mat-icon
          >
          {{ "COMMOM.LUU" | translate }}
        </button>
        <button
          mat-raised-button
          style="
            float: right;
            margin-right: 12px;
            color: #989898;
            background-color: #f3f1f1;
          "
          class="ja_btn-goback"
          (click)="goBack()"
        >
          <mat-icon style="color: #989898; font-size: 16px" aria-hidden="false">
            west</mat-icon
          >
          {{ "COMMOM.TROLAI" | translate }}
        </button>
        <button
          mat-raised-button
          style="
            float: right;
            margin-right: 12px;
            color: #989898;
            background-color: #f3f1f1;
          "
          class="ja_btn-goback"
      
        >
          <mat-icon style="color: #989898; font-size: 16px" aria-hidden="false">
            settings</mat-icon
          >
          Đặt lại
        </button> -->
      </div>
    </div>
    <div
      class="overlay overlay-block cursor-default modal-body overflow-auto"
      style="min-height: 400px; max-height: 70vh"
    >
      <ng-container *ngIf="loaimathangManagementService.isLoading$ | async">
        <div class="overlay-layer bg-transparent">
          <div class="spinner spinner-lg spinner-success"></div>
        </div>
      </ng-container>
      <ng-container>
        <form action="#" class="form form-label-right" [formGroup]="formGroup">
          <div class="form-group row">
            <div class="col-lg-6">
              <mat-form-field class="example-full-width" style="margin-top: 19px">
                <input
                  class="input-batbuoc mat-focused required"
                  required
                  matInput
                  type="text"
                  formControlName="tenloaimathang"
                  placeholder="Tên loại mặt hàng"
                />
              </mat-form-field>
            </div>
  
            <div class="col-lg-6" *ngIf="isInitData.asObservable() | async">
              <small>Loại mặt hàng cha</small>
              <mat-form-field class="example-full-width">
                <mat-select  formControlName="loaimathangcha" [value]="0">
                  <mat-option
                    *ngFor="let item of loaiMHFilters"
                    [value]="item.IdLMHParent"
                  >
                    {{ item.TenLMHParent }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!-- <div class="col-lg-2">
              <mat-form-field class="example-full-width">
                <input
                  class="input-batbuoc mat-focused required"
                  required
                  matInput
                  type="text"
                  formControlName="loaimathangcha"
                  placeholder="Loại mặt hàng cha"
                />
              </mat-form-field>
            </div> -->
            <div class="col-lg-6">
              <mat-form-field class="example-full-width" style="margin-top: 19px">
                <input
                  matInput
                  type="text"
                  formControlName="mota"
                  placeholder="Mô tả"
                />
              </mat-form-field>
            </div>
  
            <div class="col-lg-3">
              <small></small>
              <mat-form-field class="example-full-width" style="margin-top: 19px">
                <input
                  class="input-batbuoc mat-focused required"
                  required
                  matInput
                  type="text"
                  formControlName="douutien"
                  placeholder="Độ ưu tiên"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-3" *ngIf="isInitData.asObservable() | async">
              <small>Kho</small>
              <mat-form-field class="example-full-width">
                <mat-select  formControlName="kho" [value]="0">
                  <mat-option
                    *ngFor="let itemkho of khoFilters"
                    [value]="itemkho.IdKho"
                  >
                    {{ itemkho.TenK }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="form-group row" style="height: 150px;">
            <div class="col-md-2 kt-margin-bottom-10-mobile">
              <input type="file" style="display: none" #fileInput multiple  (change)="onFileSelected($event)" accept="image/*" />
              <button mat-raised-button class="ja_btn-addnew" style="margin-right: 10px" (click)="fileInput.click()" >
                  Chọn hình ảnh
              </button>
          </div>
          <!-- <div class="col-md-6">
              <div class="row">
                  <div class="col-md-3 kt-margin-bottom-10-mobile" *ngFor="let image of selectedImages; let i = index">
                      <div style="position: relative;">
                          <span style="position: absolute; top: 0; left: 0; background-color: rgba(255, 255, 255, 0.7); padding: 5px;">{{image.name}}</span>
                          <img width="100px" height="100px" *ngIf="image.name"  [src]="image.url" alt="Selected Image">
                          <button mat-icon-button color="warn" *ngIf="image.name" (click)="removeImage(i)" style="position: absolute; bottom: 0; right: 0;">
                              <mat-icon>delete</mat-icon>
                          </button>
                      </div>
                  </div>
              </div>
          </div> -->

          <div class="col-md-8 kt-margin-bottom-10-mobile" style="margin-left: 10px">
            <div class="d-flex flex-row align-items-center overflow-hidden">
              <div class="position-relative"style="width: 100%; height: 130px" >
                <div class="image-container">
                  <div
                    *ngFor="
                      let image of selectedImages;
                      let i = index
                    "
                    class="mr-2"
                  >
                    <div class="position-relative">
                     
                      <span style="position: absolute; top: 0; left: 0; background-color: rgba(255, 255, 255, 0.7); padding: 5px;">{{image.name}}</span>
                      <img width="100px" height="100px" style="margin-right: 10px" *ngIf="image.name"  [src]="image.url" alt="Selected Image">
                      <button mat-icon-button color="warn" *ngIf="image.name" (click)="removeImage(i)" style="position: absolute; bottom: 0; right: 0;">
                        <mat-icon>delete</mat-icon>
                    </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          </div>
        </form>
      </ng-container>
    </div>
    <div class="modal-footer dialog-footer">
      <ng-container>
          <button mat-raised-button style="float: right; margin: 0; margin-right: 12px;" class="ja_btn-goback "
          (click)="goBack()">{{'COMMOM.TROLAI' | translate}}</button>
    </ng-container>
    <ng-container *ngIf="!isUpdateMode">
      <button
      [class.spinner]="isLoadingSubmit$ | async"
      [disabled]="isLoadingSubmit$ | async"
      mat-raised-button
      id="submitButton"
      style="float: right; margin: 0; margin-right: 12px;"
      class="ja_btn-addcontinue"
      (click)="Luu()"
    >
    <mat-icon class="icon-repeat">repeat</mat-icon> Lưu và Đóng
    </button>
    </ng-container>
      <ng-container *ngIf="isUpdateMode">
        <button
        mat-raised-button
        style="float: right; margin: 0; margin-right: 12px;"
        class="ja_btn-goback"   
        (click)="reset()"
      >
        Đặt lại
      </button>
      </ng-container>
      <ng-container *ngIf="isUpdateMode">
          <button
          [class.spinner]="isLoadingSubmit$ | async"
          [disabled]="isLoadingSubmit$ | async"
          mat-raised-button
          style="float: right; margin: 0; margin-right: 12px;"
          class="ja_btn-addnew"
          (click)="Luu()"
        >
        Lưu và Đóng
        </button>
    </ng-container>
    </div>
  </div>
  